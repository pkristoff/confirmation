<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>AppFactory</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
    <div class="banner">
        
        <h1>
            <span class="type">Class</span>
            AppFactory
            
                <span class="parent">&lt;
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/app/app_factories/app_factory_rb.html">app/app_factories/app_factory.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="AppFactory.html">AppFactory</a></p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-add_candidate_events">add_candidate_events</a>,
              </li>
            
              
              <li>
                <a href="#method-c-add_confirmation_event">add_confirmation_event</a>,
              </li>
            
              
              <li>
                <a href="#method-c-add_confirmation_event_due_date">add_confirmation_event_due_date</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-create">create</a>,
              </li>
            
              
              <li>
                <a href="#method-c-create_admin">create_admin</a>,
              </li>
            
              
              <li>
                <a href="#method-c-create_candidate">create_candidate</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-generate_seed">generate_seed</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-revert_confirmation_event">revert_confirmation_event</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-add_candidate_events">
            
              <b>add_candidate_events</b>(candidate)
            
            <a href="../classes/AppFactory.html#method-c-add_candidate_events" name="method-c-add_candidate_events" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>add candidate events to candidate based on ConfirmationEvents</p>

<h3 id="method-c-add_candidate_events-label-Parameters-3A">Parameters:</h3>
<ul><li>
<p><code>:candidate</code> options for a new <a href="Admin.html">Admin</a></p>
</li></ul>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-add_candidate_events_source')" id="l_method-c-add_candidate_events_source">show</a>
                
              </p>
              <div id="method-c-add_candidate_events_source" class="dyn-source">
                <pre><span class="ruby-comment"># File app/app_factories/app_factory.rb, line 56</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">add_candidate_events</span>(<span class="ruby-identifier">candidate</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&#39;Cannot add candidate_events because some already exist.&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">candidate</span>.<span class="ruby-identifier">candidate_events</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
  <span class="ruby-constant">ConfirmationEvent</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">confirmation_event</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">candidate</span>.<span class="ruby-identifier">add_candidate_event</span>(<span class="ruby-identifier">confirmation_event</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-add_confirmation_event">
            
              <b>add_confirmation_event</b>(event_name)
            
            <a href="../classes/AppFactory.html#method-c-add_confirmation_event" name="method-c-add_confirmation_event" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>create a new <a href="Admin.html">Admin</a></p>

<h3 id="method-c-add_confirmation_event-label-Parameters-3A">Parameters:</h3>
<ul><li>
<p><code>:options</code> options for a new <a href="Admin.html">Admin</a></p>
</li></ul>

<h3 id="method-c-add_confirmation_event-label-return-3A">return:</h3>

<p>New instance</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-add_confirmation_event_source')" id="l_method-c-add_confirmation_event_source">show</a>
                
              </p>
              <div id="method-c-add_confirmation_event_source" class="dyn-source">
                <pre><span class="ruby-comment"># File app/app_factories/app_factory.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">add_confirmation_event</span>(<span class="ruby-identifier">event_name</span>)
  <span class="ruby-identifier">raise</span>(<span class="ruby-string">&#39;add_confirmation_event: event_name cannot be nil&#39;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">event_name</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">event_name</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-comment"># no longer an error so can migrate from a new db.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">ConfirmationEvent</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-identifier">event_name</span>)
    <span class="ruby-comment"># puts(&quot;add_confirmation_event: event_name already defined: #{event_name}&quot;)</span>
    <span class="ruby-constant">AppFactory</span>.<span class="ruby-identifier">revert_confirmation_event</span>(<span class="ruby-identifier">event_name</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># puts &#39;starting event_name&#39;</span>
  <span class="ruby-identifier">new_confirmation_event</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">event</span> = <span class="ruby-constant">ConfirmationEvent</span>.<span class="ruby-identifier">find_or_create_by!</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">event_name</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">confirmation_event</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">confirmation_event</span>.<span class="ruby-identifier">name</span> = <span class="ruby-identifier">event_name</span>
    <span class="ruby-comment"># puts &#39;attempting the_way_due_date&#39;</span>
    <span class="ruby-identifier">confirmation_event</span>.<span class="ruby-identifier">the_way_due_date</span> = <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>
    <span class="ruby-identifier">confirmation_event</span>.<span class="ruby-identifier">chs_due_date</span> = <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>
    <span class="ruby-comment"># puts &#39;done attempting the_way_due_date&#39;</span>
    <span class="ruby-identifier">new_confirmation_event</span> = <span class="ruby-identifier">confirmation_event</span>
    <span class="ruby-comment"># puts &quot;new created #{confirmation_event.name} id: #{confirmation_event.id} due_date = #{confirmation_event.the_way_due_date}&quot;</span>
    <span class="ruby-comment"># puts &quot;new created #{confirmation_event.name} id: #{confirmation_event.id} due_date = #{confirmation_event.chs_due_date}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">new_confirmation_event</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-comment"># puts &#39;adding to candidates&#39;</span>
    <span class="ruby-constant">Candidate</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">candidate</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">candidate</span>.<span class="ruby-identifier">add_candidate_event</span>(<span class="ruby-identifier">new_confirmation_event</span>)
      <span class="ruby-comment"># puts &quot;adding to candidate: #{candidate.account_name}  candidate=#{candidate}&quot;</span>
      <span class="ruby-identifier">candidate</span>.<span class="ruby-identifier">save</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># puts &#39;ending event_name&#39;</span>
  <span class="ruby-identifier">event</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-add_confirmation_event_due_date">
            
              <b>add_confirmation_event_due_date</b>(event_name)
            
            <a href="../classes/AppFactory.html#method-c-add_confirmation_event_due_date" name="method-c-add_confirmation_event_due_date" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>create or update <a href="ConfirmationEvent.html">ConfirmationEvent</a>. 
Update all candidates with new <a
href="ConfirmationEvent.html">ConfirmationEvent</a></p>

<h3 id="method-c-add_confirmation_event_due_date-label-Parameters-3A">Parameters:</h3>
<ul><li>
<p><code>:event_name</code> <a
href="ConfirmationEvent.html">ConfirmationEvent</a> name</p>
</li></ul>

<h3 id="method-c-add_confirmation_event_due_date-label-return-3A">return:</h3>

<p><a href="CandidateEvent.html">CandidateEvent</a></p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-add_confirmation_event_due_date_source')" id="l_method-c-add_confirmation_event_due_date_source">show</a>
                
              </p>
              <div id="method-c-add_confirmation_event_due_date_source" class="dyn-source">
                <pre><span class="ruby-comment"># File app/app_factories/app_factory.rb, line 141</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">add_confirmation_event_due_date</span>(<span class="ruby-identifier">event_name</span>)
  <span class="ruby-comment"># puts &#39;starting event_name&#39;</span>
  <span class="ruby-identifier">new_confirmation_event</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">event</span> = <span class="ruby-constant">ConfirmationEvent</span>.<span class="ruby-identifier">find_or_create_by!</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">event_name</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">confirmation_event</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">confirmation_event</span>.<span class="ruby-identifier">name</span> = <span class="ruby-identifier">event_name</span>
    <span class="ruby-comment"># puts &#39;attempting due_date&#39;</span>
    <span class="ruby-identifier">confirmation_event</span>.<span class="ruby-identifier">due_date</span> = <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>
    <span class="ruby-comment"># puts &#39;done attempting due_date&#39;</span>
    <span class="ruby-identifier">new_confirmation_event</span> = <span class="ruby-identifier">confirmation_event</span>
    <span class="ruby-comment"># puts &quot;new created #{confirmation_event.name} id: #{confirmation_event.id} due_date = #{confirmation_event.the_way_due_date}&quot;</span>
    <span class="ruby-comment"># puts &quot;new created #{confirmation_event.name} id: #{confirmation_event.id} due_date = #{confirmation_event.chs_due_date}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">new_confirmation_event</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-comment"># puts &#39;adding to candidates&#39;</span>
    <span class="ruby-constant">Candidate</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">candidate</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">candidate</span>.<span class="ruby-identifier">add_candidate_event</span>(<span class="ruby-identifier">new_confirmation_event</span>)
      <span class="ruby-comment"># puts &quot;adding to candidate: #{candidate.account_name}&quot;</span>
      <span class="ruby-identifier">candidate</span>.<span class="ruby-identifier">save</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># puts &#39;ending event_name&#39;</span>
  <span class="ruby-identifier">event</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-create">
            
              <b>create</b>(resource_class)
            
            <a href="../classes/AppFactory.html#method-c-create" name="method-c-create" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>create a resource_class</p>

<h3 id="method-c-create-label-Parameters-3A">Parameters:</h3>
<ul><li>
<p><code>:resource_class</code> <a href="Candidate.html">Candidate</a> or <a
href="Admin.html">Admin</a></p>
</li></ul>

<h3 id="method-c-create-label-return-3A">return:</h3>

<p>New instance</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-create_source')" id="l_method-c-create_source">show</a>
                
              </p>
              <div id="method-c-create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File app/app_factories/app_factory.rb, line 17</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">resource_class</span>)
  <span class="ruby-identifier">resource_class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Candidate</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">create_candidate</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">create_admin</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-create_admin">
            
              <b>create_admin</b>(options={})
            
            <a href="../classes/AppFactory.html#method-c-create_admin" name="method-c-create_admin" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>create a new <a href="Admin.html">Admin</a></p>

<h3 id="method-c-create_admin-label-Parameters-3A">Parameters:</h3>
<ul><li>
<p><code>:options</code> options for a new <a href="Admin.html">Admin</a></p>
</li></ul>

<h3 id="method-c-create_admin-label-return-3A">return:</h3>

<p>New instance</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-create_admin_source')" id="l_method-c-create_admin_source">show</a>
                
              </p>
              <div id="method-c-create_admin_source" class="dyn-source">
                <pre><span class="ruby-comment"># File app/app_factories/app_factory.rb, line 32</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">create_admin</span>(<span class="ruby-identifier">options</span>={})
  <span class="ruby-constant">Admin</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-create_candidate">
            
              <b>create_candidate</b>()
            
            <a href="../classes/AppFactory.html#method-c-create_candidate" name="method-c-create_candidate" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>create a new <a href="Candidate.html">Candidate</a> and then add the
candidate_events</p>

<h3 id="method-c-create_candidate-label-return-3A">return:</h3>

<p>New instance</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-create_candidate_source')" id="l_method-c-create_candidate_source">show</a>
                
              </p>
              <div id="method-c-create_candidate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File app/app_factories/app_factory.rb, line 43</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">create_candidate</span>
  <span class="ruby-identifier">candidate</span> = <span class="ruby-constant">Candidate</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">add_candidate_events</span>(<span class="ruby-identifier">candidate</span>)
  <span class="ruby-identifier">candidate</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-generate_seed">
            
              <b>generate_seed</b>()
            
            <a href="../classes/AppFactory.html#method-c-generate_seed" name="method-c-generate_seed" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>create or find the <a href="Admin.html">Admin</a> - reseting password. 
Then create the seed</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-generate_seed_source')" id="l_method-c-generate_seed_source">show</a>
                
              </p>
              <div id="method-c-generate_seed_source" class="dyn-source">
                <pre><span class="ruby-comment"># File app/app_factories/app_factory.rb, line 167</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">generate_seed</span>
  <span class="ruby-constant">Admin</span>.<span class="ruby-identifier">find_or_create_by!</span>(<span class="ruby-identifier">email</span><span class="ruby-operator">:</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">secrets</span>.<span class="ruby-identifier">admin_email</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">admin</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">admin</span>.<span class="ruby-identifier">name</span> = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">secrets</span>.<span class="ruby-identifier">admin_name</span>
    <span class="ruby-identifier">admin</span>.<span class="ruby-identifier">password</span> = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">secrets</span>.<span class="ruby-identifier">admin_password</span>
    <span class="ruby-identifier">admin</span>.<span class="ruby-identifier">password_confirmation</span> = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">secrets</span>.<span class="ruby-identifier">admin_password</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">create_seed_candidate</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-revert_confirmation_event">
            
              <b>revert_confirmation_event</b>(event_name)
            
            <a href="../classes/AppFactory.html#method-c-revert_confirmation_event" name="method-c-revert_confirmation_event" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>destroy candidate_event from candidates.</p>

<h3 id="method-c-revert_confirmation_event-label-Parameters-3A">Parameters:</h3>
<ul><li>
<p><code>:event_name</code> options for a new <a href="Admin.html">Admin</a></p>
</li></ul>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-revert_confirmation_event_source')" id="l_method-c-revert_confirmation_event_source">show</a>
                
              </p>
              <div id="method-c-revert_confirmation_event_source" class="dyn-source">
                <pre><span class="ruby-comment"># File app/app_factories/app_factory.rb, line 70</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">revert_confirmation_event</span>(<span class="ruby-identifier">event_name</span>)
  <span class="ruby-comment"># puts &quot;reverting: #{event_name}&quot;</span>
  <span class="ruby-constant">Candidate</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">candidate</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># puts &quot;reverting candidate: #{candidate.account_name}&quot;</span>
    <span class="ruby-identifier">founds</span> = <span class="ruby-identifier">candidate</span>.<span class="ruby-identifier">candidate_events</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">candidate_event</span><span class="ruby-operator">|</span> <span class="ruby-identifier">candidate_event</span>.<span class="ruby-identifier">confirmation_event</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">candidate_event</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">event_name</span> }
    <span class="ruby-identifier">founds</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">found</span><span class="ruby-operator">|</span>
      <span class="ruby-comment"># puts &quot;found candidate_event: #{found.name}&quot; unless found.confirmation_event.nil?</span>
      <span class="ruby-comment"># puts &quot;found empty confirmation_event&quot; if found.confirmation_event.nil?</span>
      <span class="ruby-identifier">candidate</span>.<span class="ruby-identifier">candidate_events</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">found</span>)
      <span class="ruby-identifier">found</span>.<span class="ruby-identifier">destroy</span>
    <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># puts &#39;about to destroy ConfirmationEvent&#39;</span>
  <span class="ruby-identifier">confirmation_event</span> = <span class="ruby-constant">ConfirmationEvent</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">event_name</span>)
  <span class="ruby-identifier">confirmation_event</span>.<span class="ruby-identifier">destroy</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">confirmation_event</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-comment"># puts &quot;done reverting: #{event_name}&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                        </div>

    </div>
  </body>
</html>

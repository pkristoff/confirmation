<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>plugin.js</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../../../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../../../css/github.css" type="text/css" media="screen" />
<script src="../../../../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
    <div class="banner">
        
        <h1>
            plugin.js
        </h1>
        <ul class="files">
            <li>public/assets/tinymce/plugins/image/plugin.js</li>
            <li>Last modified: 2016-09-23 19:31:46 -0400</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>tinymce.PluginManager.add(“image”,function(a){function b(a,b){function
c(a,c){d.parentNode&amp;&amp;d.parentNode.removeChild(d),b({width:a,height:c})}var
d=document.createElement(“img”);d.onload=function(){c(Math.max(d.width,d.clientWidth),Math.max(d.height,d.clientHeight))},d.onerror=function(){c()};var
e=d.style;e.visibility=“hidden”,e.position=“fixed”,e.bottom=e.left=0,e.width=e.height=“auto”,document.body.appendChild(d),d.src=a}function
c(a,b,c){function d(a,c){return c=c||[],tinymce.each(a,function(a){var
e={text:a.text||a.title};a.menu?e.menu=d(a.menu):(e.value=a.value,b(e)),c.push(e)}),c}return
d(a,c||[])}function d(b){return function(){var
c=a.settings.image_list;“string”==typeof
c?tinymce.util.XHR.send({url:c,success:function(a){b(tinymce.util.JSON.parse(a))}}):“function”==typeof
c?c(b):b©}}function e(d){function e(){var <a
href="0">a,b,c,d;a=l.find(“#width”)</a>,<a
href="0">b=l.find(“#height”)</a>,<a
href="0">a&&b&&(c=a.value(),d=b.value(),l.find(“#constrain”)</a>.checked()&amp;&amp;o&amp;&amp;p&amp;&amp;c&amp;&amp;d&amp;&amp;(o!=c?(d=Math.round(c/o*d),isNaN(d)||b.value(d)):(c=Math.round(d/p*c),isNaN©||a.value©)),o=c,p=d)}function
f(){function b(b){function
c(){b.onload=b.onerror=null,a.selection&amp;&amp;(a.selection.select(b),a.nodeChanged())}b.onload=function(){s.width||s.height||!u||t.setAttribs(b,{width:b.clientWidth,height:b.clientHeight}),c()},b.onerror=c}var
c,d;j(),e(),s=tinymce.extend(s,l.toJSON()),s.alt||(s.alt=“”),s.title||(s.title=“”),“”===s.width&amp;&amp;(s.width=null),“”===s.height&amp;&amp;(s.height=null),s.style||(s.style=null),s={<a
href=""class"">src:s.src,alt:s.alt,title:s.title,width:s.width,height:s.height,style:s.style,caption:s.caption,“class”:s</a>},a.undoManager.transact(function(){function
e(b){return <a
href="b.nodeName">a.schema.getTextBlockElements()</a>}if(!s.src)return
void(m&amp;&amp;(t.remove(m),a.focus(),a.nodeChanged()));if(“”===s.title&amp;&amp;(s.title=null),m?t.setAttribs(m,s):(s.id=“__mcenew”,a.focus(),a.selection.setContent(t.createHTML(“img”,s)),m=t.get(“__mcenew”),t.setAttrib(m,“id”,null)),a.editorUpload.uploadImagesAuto(),s.caption===!1&amp;&amp;t.is(m.parentNode,“figure.image”)&amp;&amp;(c=m.parentNode,t.insertAfter(m,c),t.remove©),s.caption!==!0)b(m);else
if(!t.is(m.parentNode,“figure.image”)){d=m,m=m.cloneNode(!0),c=t.create(“figure”,{“class”:“image”}),c.appendChild(m),c.appendChild(t.create(“figcaption”,{contentEditable:!0},“Caption”)),c.contentEditable=!1;var
f=t.getParent(d,e);f?t.split(f,d,c):t.replace(c,d),a.selection.select©}})}function
g(a){return a&amp;&amp;(a=a.replace(/px$/,“”)),a}function h©{var
d,e,f,g=c.meta||{};q&amp;&amp;q.value(a.convertURL(this.value(),“src”)),tinymce.each(g,function(a,b){l.find(“#”+b).value(a)}),g.width||g.height||(d=a.convertURL(this.value(),“src”),e=a.settings.image_prepend_url,f=new
<a
href="a-z">RegExp(“^(?:</a>+:)?//”,“i”),e&amp;&amp;!f.test(d)&amp;&amp;d.substring(0,e.length)!==e&amp;&amp;(d=e+d),this.value(d),b(a.documentBaseURI.toAbsolute(this.value()),function(a){a.width&amp;&amp;a.height&amp;&amp;u&amp;&amp;(o=a.width,p=a.height,l.find(“#width”).value(o),l.find(“#height”).value(p))}))}function
i(a){if(a.margin){var b=a.margin.split(“ ”);switch(b.length){case <a
href=""margin-top"">1:a</a>=<a href=""margin-top"">a</a>||<a
href="0">b</a>,<a href=""margin-right"">a</a>=<a
href=""margin-right"">a</a>||<a href="0">b</a>,<a
href=""margin-bottom"">a</a>=<a href=""margin-bottom"">a</a>||<a
href="0">b</a>,<a href=""margin-left"">a</a>=<a
href=""margin-left"">a</a>||<a href="0">b</a>;break;case <a
href=""margin-top"">2:a</a>=<a href=""margin-top"">a</a>||<a
href="0">b</a>,<a href=""margin-right"">a</a>=<a
href=""margin-right"">a</a>||<a href="1">b</a>,<a
href=""margin-bottom"">a</a>=<a href=""margin-bottom"">a</a>||<a
href="0">b</a>,<a href=""margin-left"">a</a>=<a
href=""margin-left"">a</a>||<a href="1">b</a>;break;case <a
href=""margin-top"">3:a</a>=<a href=""margin-top"">a</a>||<a
href="0">b</a>,<a href=""margin-right"">a</a>=<a
href=""margin-right"">a</a>||<a href="1">b</a>,<a
href=""margin-bottom"">a</a>=<a href=""margin-bottom"">a</a>||<a
href="2">b</a>,<a href=""margin-left"">a</a>=<a
href=""margin-left"">a</a>||<a href="1">b</a>;break;case <a
href=""margin-top"">4:a</a>=<a href=""margin-top"">a</a>||<a
href="0">b</a>,<a href=""margin-right"">a</a>=<a
href=""margin-right"">a</a>||<a href="1">b</a>,<a
href=""margin-bottom"">a</a>=<a href=""margin-bottom"">a</a>||<a
href="2">b</a>,<a href=""margin-left"">a</a>=<a
href=""margin-left"">a</a>||<a href="3">b</a>}delete a.margin}return
a}function j(){function b(a){return <a
href="0-9">a.length>0&&/^</a>+$/.test(a)&amp;&amp;(a+=“px”),a}if(a.settings.image_advtab){var
<a
href=""margin-top"">c=l.toJSON(),d=t.parseStyle(c.style);d=i(d),c.vspace&&(d</a>=<a
href=""margin-bottom"">d</a>=<a
href=""margin-left"">b(c.vspace)),c.hspace&&(d</a>=<a
href=""margin-right"">d</a>=<a
href=""border-width"">b(c.hspace)),c.border&&(d</a>=b(c.border)),l.find(“#style”).value(t.serializeStyle(t.parseStyle(t.serializeStyle(d))))}}function
k(){if(a.settings.image_advtab){var <a
href=""margin-top"">b=l.toJSON(),c=t.parseStyle(b.style);l.find(“#vspace”).value(“”),l.find(“#hspace”).value(“”),c=i©,(c</a>&amp;&amp;<a
href=""margin-bottom"">c</a>||<a href=""margin-right"">c</a>&amp;&amp;<a
href=""margin-left"">c</a>)&amp;&amp;(<a href=""margin-top"">c</a>===<a
href=""margin-bottom"">c</a>?<a
href=""margin-top"">l.find(“#vspace”).value(g(c</a>)):<a
href=""margin-right"">l.find(“#vspace”).value(“”),c</a>===<a
href=""margin-left"">c</a>?<a
href=""margin-right"">l.find(“#hspace”).value(g(c</a>)):<a
href=""border-width"">l.find(“#hspace”).value(“”)),c</a>&amp;&amp;<a
href=""border-width"">l.find(“#border”).value(g(c</a>)),l.find(“#style”).value(t.serializeStyle(t.parseStyle(t.serializeStyle©)))}}var
l,m,n,o,p,q,r,s={},<a
href="0">t=a.dom,u=a.settings.image_dimensions!==!1;m=a.selection.getNode(),n=t.getParent(m,“figure.image”),n&&(m=t.select(“img”,n)</a>),m&amp;&amp;(“IMG”!=m.nodeName||m.getAttribute(“data-mce-object”)||m.getAttribute(“data-mce-placeholder”))&amp;&amp;(m=null),m&amp;&amp;(o=t.getAttrib(m,“width”),p=t.getAttrib(m,“height”),s={src:t.getAttrib(m,“src”),alt:t.getAttrib(m,“alt”),title:t.getAttrib(m,“title”),“class”:t.getAttrib(m,“class”),width:o,height:p,caption:!!n}),d&amp;&amp;(q={type:“listbox”,label:“Image
list”,values:c(d,function(b){b.value=a.convertURL(b.value||b.url,“src”)},[{text:“None”,value:“”}]),value:s.src&amp;&amp;a.convertURL(s.src,“src”),onselect:function(a){var
b=l.find(“#alt”);(!b.value()||a.lastControl&amp;&amp;b.value()==a.lastControl.text())&amp;&amp;b.value(a.control.text()),l.find(“#src”).value(a.control.value()).fire(“change”)},onPostRender:function(){q=this}}),a.settings.image_class_list&amp;&amp;(r={name:“class”,type:“listbox”,label:“Class”,values:c(a.settings.image_class_list,function(b){b.value&amp;&amp;(b.textStyle=function(){return
a.formatter.getCssText({<a
href="b.value">inline:“img”,classes:</a>})})})});var <a
href="{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:h},q">v=</a>;a.settings.image_description!==!1&amp;&amp;v.push({name:“alt”,type:“textbox”,label:“Image
description”}),a.settings.image_title&amp;&amp;v.push({name:“title”,type:“textbox”,label:“Image
Title”}),u&amp;&amp;v.push({type:“container”,label:“Dimensions”,layout:“flex”,direction:“row”,align:“center”,spacing:5,items:[{name:“width”,type:“textbox”,maxLength:5,size:3,onchange:e,ariaLabel:“Width”},{type:“label”,text:“x”},{name:“height”,type:“textbox”,maxLength:5,size:3,onchange:e,ariaLabel:“Height”},{name:“constrain”,type:“checkbox”,checked:!0,text:“Constrain
proportions”}]}),v.push®,a.settings.image_caption&amp;&amp;tinymce.Env.ceFalse&amp;&amp;v.push({name:“caption”,type:“checkbox”,label:“Caption”}),a.settings.image_advtab?(m&amp;&amp;(m.style.marginLeft&amp;&amp;m.style.marginRight&amp;&amp;m.style.marginLeft===m.style.marginRight&amp;&amp;(s.hspace=g(m.style.marginLeft)),m.style.marginTop&amp;&amp;m.style.marginBottom&amp;&amp;m.style.marginTop===m.style.marginBottom&amp;&amp;(s.vspace=g(m.style.marginTop)),m.style.borderWidth&amp;&amp;(s.border=g(m.style.borderWidth)),s.style=a.dom.serializeStyle(a.dom.parseStyle(a.dom.getAttrib(m,“style”)))),l=a.windowManager.open({title:“Insert/edit
<a
href=""left","right"">image”,data:s,bodyType:“tabpanel”,body:[{title:“General”,type:“form”,items:v},{title:“Advanced”,type:“form”,pack:“start”,items:[{label:“Style”,name:“style”,type:“textbox”,onchange:k},{type:“form”,layout:“grid”,packV:“start”,columns:2,padding:0,alignH:</a>,defaults:{type:“textbox”,maxWidth:50,onchange:j},items:[{label:“Vertical
space”,name:“vspace”},{label:“Horizontal
space”,name:“hspace”},{label:“Border”,name:“border”}]}]}],onSubmit:f})):l=a.windowManager.open({title:“Insert/edit
image”,data:s,body:v,onSubmit:f})}a.on(“preInit”,function(){function
b(a){var b=a.attr(“class”);return b&amp;&amp;/bimageb/.test(b)}function
c(a){return function©{function
d(b){b.attr(“contenteditable”,a?“true”:null)}for(var <a
href="f">e,f=c.length;f–;)e=c</a>,b(e)&amp;&amp;(e.attr(“contenteditable”,a?“false”:null),tinymce.each(e.getAll(“figcaption”),d))}}a.parser.addNodeFilter(“figure”,c(!0)),a.serializer.addNodeFilter(“figure”,c(!1))}),a.addButton(“image”,{icon:“image”,tooltip:“Insert/edit
<a
href="data-mce-object">image”,onclick:d(e),stateSelector:“img:not(</a>,[data-mce-placeholder]),figure.image”}),a.addMenuItem(“image”,{icon:“image”,text:“Insert/edit
image”,onclick:d(e),context:“insert”,prependToContext:!0}),a.addCommand(“mceImage”,d(e))});</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
              </div>

    </div>
  </body>
</html>
